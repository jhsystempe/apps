$(function() {
    console.clear();
    console.log("Login Page starter!");
    altair_login_page.init();
    if(sessvars.status_code!=null){
        if(sessvars.status_code==0){
            window.location.href = 'app.html';
        }
    }
});
var $login_card = $("#login_card"),
    $login_form = $("#login_form"),
    $login_help = $("#login_help"),
    $register_form = $("#register_form"),
    $login_password_reset = $("#login_password_reset");
altair_login_page = {
    init: function() {
        var i = function() {
            $login_form.show().siblings().hide()
        }, o = function() {
                $register_form.show().siblings().hide()
            }, n = function() {
                $login_help.show().siblings().hide()
            }, _ = function() {
                $login_password_reset.show().siblings().hide()
            };
        $("#login_help_show").on("click", function(i) {
            i.preventDefault(), altair_md.card_show_hide($login_card, void 0, n, void 0)
        }), $("#signup_form_show").on("click", function(i) {
            i.preventDefault(), $(this).fadeOut("280"), altair_md.card_show_hide($login_card, void 0, o, void 0)
        }), $(".back_to_login").on("click", function(o) {
            o.preventDefault(), $("#signup_form_show").fadeIn("280"), altair_md.card_show_hide($login_card, void 0, i, void 0)
        }),
        $("#frmLogin").submit(function(){
            console.log("Sending login form");
            sessvars.sessionid = "";
            sessvars.username = $("#login_username").val();
            sessvars.password = $("#login_password").val();
            console.log("Accediendo con: "+sessvars.username);
            $.post( "http://192.168.50.47/webservice/rest/ws/login.php", { user:sessvars.username, password:sessvars.password }, function( data ) {
                console.log( data.result.status_code );
                console.log( data.result.message );
                sessvars.status_code = data.result.status_code;
                if(sessvars.status_code!=0){
                    $("#login_password").val('');
                    UIkit.modal.alert(data.result.message);
                }else{
                    $("#login_username").val('');
                    $("#login_password").val('');
                    sessvars.sessionid = data.result.message;
                    window.location.href = 'app.html';
                }
            }, "json");
            return(false);
        })
    }
};